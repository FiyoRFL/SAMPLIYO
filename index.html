<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAMPLETTE :: DUSTY EDITION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=Rubik+Glitch&family=Special+Elite&display=swap');

        :root {
            --rust: #a65e2e;
            --dust: #d4c5a9;
            --dark-dust: #1a1918;
            --vinyl-black: #0d0d0d;
            --screen-glow: rgba(50, 205, 50, 0.1);
            --crt-line: rgba(0, 0, 0, 0.2);
        }

        body {
            background-color: var(--dark-dust);
            color: var(--dust);
            font-family: 'Courier Prime', monospace;
            overflow: hidden;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
        }

        /* Efecto CRT / Suciedad de Pantalla */
        .crt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            z-index: 999;
            opacity: 0.6;
        }

        /* Estilo de "Etiqueta Vieja" */
        .paper-texture {
            background-color: #e3dace;
            color: #1a1a1a;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%239C92AC' fill-opacity='0.1'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z'/%3E%3C/g%3E%3C/svg%3E");
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5), inset 0 0 40px rgba(0,0,0,0.1);
            transform: rotate(-0.5deg);
        }

        .mpc-pad {
            background-color: #4a4a4a;
            box-shadow: inset 2px 2px 5px rgba(255,255,255,0.1), inset -2px -2px 5px rgba(0,0,0,0.5), 5px 5px 10px rgba(0,0,0,0.5);
            transition: all 0.1s;
            border: 1px solid #222;
        }
        .mpc-pad:active {
            transform: scale(0.95);
            box-shadow: inset 2px 2px 10px rgba(0,0,0,0.8);
            background-color: #3d3d3d;
        }
        .mpc-pad.active-pad {
            background-color: var(--rust);
            box-shadow: 0 0 15px var(--rust);
        }

        /* Scrollbar sucia */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a1918; border-left: 1px solid #333; }
        ::-webkit-scrollbar-thumb { background: #555; border: 1px solid #000; }
        ::-webkit-scrollbar-thumb:hover { background: var(--rust); }

        .glitch-text {
            font-family: 'Rubik Glitch', cursive;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.5);
        }

        .typewriter {
            font-family: 'Special Elite', cursive;
        }

        .dirty-border {
            border: 2px solid #333;
            border-image: linear-gradient(to bottom right, #555 0%, #111 100%);
            border-image-slice: 1;
        }
    </style>
</head>
<body class="flex h-screen w-screen">

    <div class="crt-overlay"></div>

    <!-- SIDEBAR: CRATE & FILTERS -->
    <div class="w-80 bg-[#161514] border-r-2 border-[#2a2826] flex flex-col z-10 shadow-2xl relative">
        <!-- Logo -->
        <div class="p-6 border-b-2 border-dashed border-[#333] bg-[#111]">
            <h1 class="text-3xl glitch-text text-[#e3dace] tracking-widest">SMPL::TE</h1>
            <p class="text-[10px] text-[#666] mt-1 font-mono">CRATE DIGGING SIMULATOR V3.0</p>
        </div>

        <div class="p-4 flex-1 overflow-y-auto">
            <!-- Filters Control Panel -->
            <div class="mb-8 p-3 bg-[#1e1d1c] border border-[#333] shadow-inner">
                <div class="flex items-center gap-2 mb-3 text-[#a65e2e] border-b border-[#333] pb-1">
                    <i class="fas fa-sliders-h"></i>
                    <span class="font-bold text-sm tracking-widest">FILTER_PARAMS</span>
                </div>
                
                <div class="space-y-4 font-mono text-xs">
                    <div>
                        <label class="block text-[#666] mb-1">GENRE_SELECT</label>
                        <select id="genreFilter" class="w-full bg-[#111] text-[#999] border border-[#333] p-2 outline-none focus:border-[#a65e2e]">
                            <option value="All">ALL CRATES</option>
                            <option value="Jazz">JAZZ / FUSION</option>
                            <option value="Soul">SOUL / FUNK</option>
                            <option value="City Pop">CITY POP (JP)</option>
                            <option value="Soundtrack">LIBRARY / OST</option>
                            <option value="Hip Hop">HIP HOP / BEATS</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-[#666] mb-1">YEAR_RANGE</label>
                        <div class="flex gap-2">
                            <input type="number" id="minYear" value="1960" class="w-1/2 bg-[#111] text-[#999] border border-[#333] p-2 text-center">
                            <input type="number" id="maxYear" value="2005" class="w-1/2 bg-[#111] text-[#999] border border-[#333] p-2 text-center">
                        </div>
                    </div>

                    <div>
                        <label class="block text-[#666] mb-1">OBSCURITY (VIEWS)</label>
                        <input type="range" id="viewsFilter" min="1" max="100" value="50" class="w-full h-2 bg-[#111] appearance-none cursor-pointer">
                        <div class="flex justify-between text-[10px] text-[#444] mt-1">
                            <span>UNDERGROUND</span>
                            <span>MAINSTREAM</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Log -->
            <div>
                <div class="flex items-center gap-2 mb-3 text-[#666] border-b border-[#333] pb-1">
                    <i class="fas fa-history"></i>
                    <span class="font-bold text-sm tracking-widest">DIG_HISTORY</span>
                </div>
                <ul id="historyList" class="space-y-2 text-xs font-mono opacity-80">
                    <!-- JS will populate this -->
                    <li class="p-2 border border-dashed border-[#333] text-[#444] text-center italic">Crate is empty...</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- MAIN PLAYER -->
    <div class="flex-1 flex flex-col relative bg-[#0f0e0d]">
        <!-- Dirt textures -->
        <div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: url('https://www.transparenttextures.com/patterns/dust.png');"></div>

        <!-- Player Screen -->
        <div class="flex-1 flex items-center justify-center p-10 relative z-10">
            <!-- The "Monitor" Wrapper -->
            <div class="w-full max-w-4xl bg-[#000] p-4 rounded-lg shadow-[0_0_50px_rgba(0,0,0,0.8)] border-4 border-[#222] relative">
                <!-- Screen Glare -->
                <div class="absolute inset-0 bg-gradient-to-br from-white to-transparent opacity-5 pointer-events-none z-20"></div>
                
                <!-- Youtube Iframe -->
                <div class="aspect-video w-full bg-[#111] overflow-hidden relative border border-[#333]">
                    <div id="playerLoading" class="absolute inset-0 flex items-center justify-center text-[#333] font-mono z-0">
                        INITIALIZING SYSTEM...
                    </div>
                    <div id="playerContainer" class="relative z-10 w-full h-full">
                        <!-- Iframe injected by JS -->
                    </div>
                </div>

                <!-- Control Deck -->
                <div class="mt-6 flex items-center justify-between bg-[#1a1918] p-4 border-t-2 border-[#333]">
                    
                    <div class="flex gap-4">
                         <!-- MPC Pads (Fake controls) -->
                        <div class="w-12 h-12 mpc-pad rounded flex items-center justify-center cursor-pointer hover:bg-[#555]" onclick="togglePlay()">
                             <i class="fas fa-play text-gray-400 text-xs"></i>
                        </div>
                        <div class="w-12 h-12 mpc-pad rounded flex items-center justify-center cursor-pointer hover:bg-[#555]" onclick="toggleFavorite()">
                             <i id="favIcon" class="fas fa-heart text-gray-400 text-xs"></i>
                        </div>
                    </div>

                    <!-- THE BIG SHUFFLE BUTTON -->
                    <button onclick="shuffleTrack()" class="group relative outline-none">
                        <div class="w-24 h-24 bg-[#a65e2e] rounded-full shadow-[0_5px_0_#633619] active:shadow-none active:translate-y-[5px] transition-all flex items-center justify-center border-4 border-[#824822]">
                            <i class="fas fa-random text-[#e3dace] text-3xl group-hover:rotate-180 transition-transform duration-500"></i>
                        </div>
                        <div class="text-center mt-3 text-[10px] text-[#555] font-mono tracking-widest">PRESS SPACE</div>
                    </button>

                    <div class="flex gap-4">
                        <div class="text-right">
                            <div class="text-[10px] text-[#444] font-bold">MASTER VOL</div>
                            <div class="flex gap-1 mt-1">
                                <div class="w-2 h-6 bg-red-900"></div>
                                <div class="w-2 h-6 bg-yellow-900"></div>
                                <div class="w-2 h-6 bg-green-900"></div>
                                <div class="w-2 h-6 bg-green-600 animate-pulse"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SIDEBAR: METADATA CARD -->
    <div class="w-96 bg-[#131211] border-l-2 border-[#2a2826] relative z-10 flex flex-col p-6 shadow-2xl">
        <h2 class="text-center text-[#444] font-bold tracking-[0.3em] mb-6 text-xs border-b border-[#222] pb-2">METADATA_CARD_808</h2>
        
        <!-- The "Sticker" Card -->
        <div class="paper-texture p-6 shadow-xl transform rotate-1 relative h-full flex flex-col">
            <!-- Stain overlay -->
            <div class="absolute top-10 right-10 w-20 h-20 bg-[#6b5038] rounded-full opacity-10 blur-xl pointer-events-none"></div>

            <div class="border-4 border-double border-[#999] p-4 flex-1 flex flex-col justify-between">
                
                <div>
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-black text-white px-2 py-1 text-[10px] font-bold">IMPORT</span>
                        <span class="text-[#a65e2e] font-bold text-xl typewriter opacity-50">#<span id="metaId">000</span></span>
                    </div>

                    <h1 id="metaTitle" class="text-2xl font-bold leading-none mb-2 text-black typewriter uppercase">UNKNOWN</h1>
                    <p id="metaArtist" class="text-md text-[#555] font-mono mb-6 italic border-b border-gray-400 pb-2">Artist Name</p>

                    <div class="grid grid-cols-2 gap-4 text-xs font-mono text-[#333]">
                        <div>
                            <span class="block text-[#888] text-[9px] uppercase">Album</span>
                            <span id="metaAlbum" class="font-bold">---</span>
                        </div>
                        <div>
                            <span class="block text-[#888] text-[9px] uppercase">Year</span>
                            <span id="metaYear" class="font-bold">19--</span>
                        </div>
                        <div>
                            <span class="block text-[#888] text-[9px] uppercase">BPM (Est.)</span>
                            <span id="metaBpm" class="bg-black text-white px-1">---</span>
                        </div>
                        <div>
                            <span class="block text-[#888] text-[9px] uppercase">Key</span>
                            <span id="metaKey">---</span>
                        </div>
                        <div class="col-span-2">
                            <span class="block text-[#888] text-[9px] uppercase">Style / Genre</span>
                            <span id="metaGenre" class="font-bold text-[#a65e2e]">---</span>
                        </div>
                         <div class="col-span-2 mt-2">
                            <span class="block text-[#888] text-[9px] uppercase">Origin</span>
                            <span id="metaCountry" class="border border-black px-1 uppercase">---</span>
                        </div>
                    </div>
                </div>

                <div class="mt-8 pt-4 border-t border-gray-400">
                    <div class="flex items-center gap-2">
                         <i class="fas fa-barcode text-3xl"></i>
                         <div class="flex flex-col text-[8px] leading-tight">
                             <span>DO NOT RESELL</span>
                             <span>PROMOTIONAL USE</span>
                         </div>
                    </div>
                    <div class="mt-2 text-[10px] text-center font-bold text-red-800 uppercase border border-red-800 p-1 transform -rotate-2 inline-block">
                        CLEARED SAMPLE? NO
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- BASE DE DATOS (Mismos datos, formato JSON) ---
        const SAMPLE_DB = [
            { id: "gQ99Om3lRfw", artist: "Masayoshi Takanaka", title: "Ready to Fly", album: "Takanaka", year: 1977, genre: "City Pop", style: "Fusion / Funk", bpm: 108, key: "E Maj", country: "Japan", views: 450000 },
            { id: "J3_IT622Sbc", artist: "Casiopea", title: "Midnight Rendezvous", album: "Casiopea", year: 1979, genre: "Jazz", style: "Jazz Fusion", bpm: 124, key: "A Min", country: "Japan", views: 89000 },
            { id: "Z7G-DthvFpw", artist: "Azymuth", title: "Voo Sobre O Horizonte", album: "Águia Não Come Mosca", year: 1977, genre: "Jazz", style: "Jazz-Funk", bpm: 96, key: "G Min", country: "Brazil", views: 120000 },
            { id: "LdJ-C8yKzT8", artist: "Piero Umiliani", title: "Crepuscolo Sul Mare", album: "La Ragazza Fuoristrada", year: 1973, genre: "Soundtrack", style: "Library / Lounge", bpm: 78, key: "C Maj", country: "Italy", views: 25000 },
            { id: "8j_TDoOPnIA", artist: "Cortex", title: "Troupeau Bleu", album: "Troupeau Bleu", year: 1975, genre: "Jazz", style: "Jazz-Funk", bpm: 92, key: "F Min", country: "France", views: 67000 },
            { id: "0kK3ZJ3W8kU", artist: "Ryo Fukui", title: "Early Summer", album: "Scenery", year: 1976, genre: "Jazz", style: "Hard Bop", bpm: 160, key: "D Min", country: "Japan", views: 1500000 },
            { id: "XbM2-j5y5yY", artist: "Tatsuro Yamashita", title: "Sparkle", album: "For You", year: 1982, genre: "City Pop", style: "Funk / Soul", bpm: 118, key: "G Maj", country: "Japan", views: 980000 },
            { id: "Jd1W-7-e3-E", artist: "Madvillain", title: "Accordion", album: "Madvillainy", year: 2004, genre: "Hip Hop", style: "Abstract", bpm: 96, key: "A Min", country: "USA", views: 2000000 },
            { id: "H2W4wglPW2c", artist: "Shigeo Sekito", title: "The Word II", album: "Special Sound Series", year: 1975, genre: "Easy Listening", style: "Electone / Library", bpm: 72, key: "C# Min", country: "Japan", views: 30000 },
            { id: "x-2i-l4-w-s", artist: "Roy Ayers", title: "Everybody Loves The Sunshine", album: "Sunshine", year: 1976, genre: "Soul", style: "Neo Soul Base", bpm: 88, key: "C Maj", country: "USA", views: 5000000 },
            { id: "k-2d-s-9-a", artist: "Hiroshi Suzuki", title: "Romance", album: "Cat", year: 1975, genre: "Jazz", style: "Post-Bop", bpm: 82, key: "Bb Min", country: "Japan", views: 400000 }
        ];

        let currentTrack = null;
        let history = [];
        let favorites = [];

        // DOM Elements
        const playerContainer = document.getElementById('playerContainer');
        const historyList = document.getElementById('historyList');
        
        // Metadata Elements
        const metaTitle = document.getElementById('metaTitle');
        const metaArtist = document.getElementById('metaArtist');
        const metaAlbum = document.getElementById('metaAlbum');
        const metaYear = document.getElementById('metaYear');
        const metaBpm = document.getElementById('metaBpm');
        const metaKey = document.getElementById('metaKey');
        const metaGenre = document.getElementById('metaGenre');
        const metaCountry = document.getElementById('metaCountry');
        const metaId = document.getElementById('metaId');

        // Filters
        const genreFilter = document.getElementById('genreFilter');
        const minYear = document.getElementById('minYear');
        const maxYear = document.getElementById('maxYear');

        function init() {
            shuffleTrack();
            
            // Spacebar listener
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space' && e.target.tagName !== 'INPUT') {
                    e.preventDefault();
                    shuffleTrack();
                }
            });
        }

        function shuffleTrack() {
            // Apply Filters
            const selectedGenre = genreFilter.value;
            const minY = parseInt(minYear.value);
            const maxY = parseInt(maxYear.value);

            const candidates = SAMPLE_DB.filter(track => {
                const matchGenre = selectedGenre === 'All' || track.genre === selectedGenre;
                const matchYear = track.year >= minY && track.year <= maxY;
                return matchGenre && matchYear;
            });

            const pool = candidates.length > 0 ? candidates : SAMPLE_DB;
            
            // Pick Random
            let nextTrack;
            do {
                const r = Math.floor(Math.random() * pool.length);
                nextTrack = pool[r];
            } while (pool.length > 1 && currentTrack && nextTrack.id === currentTrack.id);

            loadTrack(nextTrack);
        }

        function loadTrack(track) {
            // Update History logic
            if (currentTrack) {
                addToHistory(currentTrack);
            }
            currentTrack = track;

            // Update Player (Re-inject iframe to ensure clean load)
            playerContainer.innerHTML = `
                <iframe width="100%" height="100%" 
                    src="https://www.youtube.com/embed/${track.id}?autoplay=1&controls=0&rel=0&modestbranding=1" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen 
                    style="pointer-events: none;">
                </iframe>
            `;

            // Update Metadata (with "typewriter" effect simulation by just replacing text)
            metaTitle.innerText = track.title;
            metaArtist.innerText = track.artist;
            metaAlbum.innerText = track.album;
            metaYear.innerText = track.year;
            metaBpm.innerText = track.bpm;
            metaKey.innerText = track.key;
            metaGenre.innerText = `${track.genre} / ${track.style}`;
            metaCountry.innerText = track.country;
            metaId.innerText = Math.floor(Math.random() * 999).toString().padStart(3, '0');

            // Reset Favorite Icon
            updateFavIcon();
        }

        function addToHistory(track) {
            const li = document.createElement('li');
            li.className = "p-2 border border-[#333] hover:bg-[#222] cursor-pointer flex gap-2 items-center group transition-colors";
            li.onclick = () => loadTrack(track);
            li.innerHTML = `
                <div class="w-2 h-2 bg-[#444] rounded-full group-hover:bg-[#a65e2e]"></div>
                <div class="truncate">
                    <span class="font-bold text-[#888]">${track.title}</span>
                    <span class="text-[#555] text-[10px] block">${track.artist}</span>
                </div>
            `;
            
            // Remove "Empty" placeholder if exists
            if (historyList.children[0]?.innerText.includes("Empty")) {
                historyList.innerHTML = '';
            }

            historyList.prepend(li);
            if (historyList.children.length > 20) historyList.lastChild.remove();
        }

        function toggleFavorite() {
            if (!currentTrack) return;
            const idx = favorites.findIndex(f => f.id === currentTrack.id);
            if (idx === -1) {
                favorites.push(currentTrack);
            } else {
                favorites.splice(idx, 1);
            }
            updateFavIcon();
        }

        function updateFavIcon() {
            const icon = document.getElementById('favIcon');
            const isFav = favorites.find(f => f.id === currentTrack?.id);
            if (isFav) {
                icon.classList.remove('text-gray-400');
                icon.classList.add('text-red-600');
            } else {
                icon.classList.add('text-gray-400');
                icon.classList.remove('text-red-600');
            }
        }

        function togglePlay() {
            // Can't really toggle play on iframe easily without API, 
            // but we can simulate by reloading or showing paused overlay.
            // For this demo, we'll just re-shuffle as a "Play Next" interaction.
            shuffleTrack();
        }

        // Boot
        window.onload = init;

    </script>
</body>
</html>
